nameOverride: ""
fullnameOverride: ""

app:
  name: ocp-dog
  namespace: guscontre-dev

images:
  frontend:
    repository: docker.io/guscontre1/ocp-dog-frontend
    tag: "8"
  frontendApi:
    repository: docker.io/guscontre1/ocp-dog-frontend-api
    tag: "6"
  backendApi:
    repository: docker.io/guscontre1/ocp-dog-backend-api
    tag: "12"
  database:
    repository: quay.io/sclorg/postgresql-15-c9s
    tag: latest

replicaCount:
  frontend: 2
  frontendApi: 2
  backendApi: 2
  database: 1

service:
  frontend:
    type: ClusterIP
    port: 80
    targetPort: 8080
    component: frontend
    tier: frontend
    portName: http
    protocol: TCP
  frontendApi:
    type: ClusterIP
    port: 5001
    targetPort: 5001
    component: frontend-api
    tier: api
    portName: http
    protocol: TCP
  backendApi:
    type: ClusterIP
    port: 5002
    targetPort: 5002
    component: backend-api
    tier: backend
    portName: http
    protocol: TCP
  database:
    type: ClusterIP
    port: 5432
    targetPort: 5432
    component: database
    tier: database
    portName: tcp
    protocol: TCP

route:
  frontend:
    component: frontend
    tier: frontend
    host: ocp-dog-frontend.apps.rm1.0a51.p1.openshiftapps.com
    tlsTermination:
    portName: http
  frontendApi:
    component: frontend-api
    tier: api
    host: ocp-dog-frontend-api.apps.rm1.0a51.p1.openshiftapps.com
    tlsTermination:
    portName: http

workloads:
  frontend:
    containerName: frontend
    env:
      - name: FRONTEND_API_URL
        configMapKey: FRONTEND_API_URL
    readinessProbe:
      path: /healthz
      port: http
      initialDelaySeconds: 10
      periodSeconds: 10
    livenessProbe:
      path: /healthz
      port: http
      initialDelaySeconds: 30
      periodSeconds: 30
  frontendApi:
    containerName: frontend-api
    env:
      - name: BACKEND_URL
        configMapKey: BACKEND_API_URL
    readinessProbe:
      path: /healthz
      port: http
      initialDelaySeconds: 10
      periodSeconds: 10
    livenessProbe:
      path: /healthz
      port: http
      initialDelaySeconds: 30
      periodSeconds: 30
  backendApi:
    containerName: backend-api
    env:
      - name: DB_HOST
        configMapKey: DB_HOST
      - name: DB_NAME
        configMapKey: DB_NAME
      - name: DB_USER
        secretKey: DB_USER
        secretNameSuffix: db
      - name: DB_PASS
        secretKey: DB_PASS
        secretNameSuffix: db
    readinessProbe:
      path: /healthz
      port: http
      initialDelaySeconds: 15
      periodSeconds: 10
    livenessProbe:
      path: /healthz
      port: http
      initialDelaySeconds: 45
      periodSeconds: 30
  database:
    containerName: database
    env:
      - name: POSTGRESQL_DATABASE
        configMapKey: DB_NAME
      - name: POSTGRESQL_USER
        secretKey: DB_USER
        secretNameSuffix: db
      - name: POSTGRESQL_PASSWORD
        secretKey: DB_PASS
        secretNameSuffix: db

config:
  frontendApiUrl: ""
  backendApiUrl: ""
  databaseHost: ""
  databaseName: ocp_dog

secrets:
  databaseUser: ocp_dog_user
  databasePassword: super-secret-pass

resources: {}

nodeSelector: {}

tolerations: []

affinity: {}

networkPolicy:
  enabled: true
  defaultDeny: true
  dns:
    namespaceLabel: kubernetes.io/metadata.name
    namespaceValue: openshift-dns
    ports:
      - 53
      - 5353
  order:
    - frontend
    - frontendApi
    - backendApi
    - database
  workloads:
    frontend:
      ingress:
        - routes: true
      egress:
        - toComponents:
            - frontendApi
    frontendApi:
      ingress:
        - fromComponents:
            - frontend
        - routes: true
      egress:
        - toComponents:
            - backendApi
        - dns: true
    backendApi:
      ingress:
        - fromComponents:
            - frontendApi
      egress:
        - toComponents:
            - database
        - dns: true
        - internet: true
    database:
      ingress:
        - fromComponents:
            - backendApi
